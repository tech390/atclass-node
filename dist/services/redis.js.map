{"version":3,"sources":["../../src/services/redis.js"],"names":["validateHost","pHost","Error","Log","info","host","process","env","REDIS_HOST","port","REDIS_PORT","redisClient","redis","createClient","password","REDIS_AUTH","tls","NODE_ENV","checkServerIdentity","undefined","on","err","message"],"mappings":";;;;;;;AAAA;;;;AACA;;;;AAIO,IAAMA,sCAAe,SAAfA,YAAe,QAAS;AACjC,QAAI,CAACC,KAAL,EAAY;AACR,cAAMC,kCAAgCD,KAAhC,CAAN;AACH;AACDE,aAAIC,IAAJ,kBAAwBH,KAAxB;AACH,CALM;;AAOA,IAAMI,sBAAOC,QAAQC,GAAR,CAAYC,UAAzB;AACPR,aAAaK,IAAb;AACO,IAAMI,sBAAOH,QAAQC,GAAR,CAAYG,UAAzB;AACP,IAAI,CAACD,IAAL,EAAW;AACP,UAAMP,kCAAgCO,IAAhC,CAAN;AACH;;AAED,IAAME,cAAcC,gBAAMC,YAAN,CAAmBJ,IAAnB,EAAyBJ,IAAzB,EAA+B;AAC/CS,cAAUR,QAAQC,GAAR,CAAYQ,UADyB;AAE/CC,SAAKV,QAAQC,GAAR,CAAYU,QAAZ,KAAyB,aAAzB,IAA0CX,QAAQC,GAAR,CAAYU,QAAZ,KAAyB,MAAnE,GAA4E,EAA5E,GAAiF;AAClFC,6BAAqB;AAAA,mBAAMC,SAAN;AAAA;AAD6D;AAFvC,CAA/B,CAApB;;AAOAR,YAAYS,EAAZ,CAAe,SAAf,EAA0B,YAAM;AAC5BjB,aAAIC,IAAJ,CAAS,iCAAT;AACH,CAFD;;AAIAO,YAAYS,EAAZ,CAAe,OAAf,EAAwB,eAAO;AAC3BjB,aAAIC,IAAJ,uCAA6CiB,IAAIC,OAAjD;AACH,CAFD;;QAKIX,W,GAAAA,W","file":"redis.js","sourcesContent":["import redis from 'redis';\r\nimport {\r\n    Log\r\n} from './log';\r\n\r\nexport const validateHost = pHost => {\r\n    if (!pHost) {\r\n        throw Error(`REDIS_HOST is invalid. ${pHost}`);\r\n    }\r\n    Log.info(`REDIS HOST: ${pHost}`);\r\n};\r\n\r\nexport const host = process.env.REDIS_HOST;\r\nvalidateHost(host);\r\nexport const port = process.env.REDIS_PORT;\r\nif (!port) {\r\n    throw Error(`REDIS_PORT is invalid. ${port}`);\r\n}\r\n\r\nconst redisClient = redis.createClient(port, host, {\r\n    password: process.env.REDIS_AUTH,\r\n    tls: process.env.NODE_ENV === 'development' || process.env.NODE_ENV === 'test' ? '' : {\r\n        checkServerIdentity: () => undefined\r\n    }\r\n});\r\n\r\nredisClient.on('connect', () => {\r\n    Log.info('REDIS CONNECTION STATUS SUCCESS');\r\n});\r\n\r\nredisClient.on('error', err => {\r\n    Log.info(`REDIS CONNECTION STATUS FAILED : ${err.message}`);\r\n});\r\n\r\nexport {\r\n    redisClient\r\n};"]}